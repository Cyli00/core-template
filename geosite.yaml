port: 7890
allow-lan: true
mode: rule
log-level: info
external-controller: 127.0.0.1:9090
unified-delay: false
tcp-concurrent: true
geodata-mode: true
dns:
    enable: true
    ipv6: false
    default-nameserver: [223.5.5.5, 119.29.29.29]
    enhanced-mode: fake-ip
    fake-ip-range: 198.18.0.1/16
    fake-ip-filter:
      - '*.lan'
      - 'localhost.ptlogin2.qq.com'
      - 'dns.msftncsi.com'
      - 'www.msftncsi.com'
      - 'www.msftconnecttest.com'
    use-hosts: true
    nameserver: ['https://doh.pub/dns-query', 'https://dns.alidns.com/dns-query']
    fallback: ['https://doh.dns.sb/dns-query', 'https://dns.cloudflare.com/dns-query', 'https://dns.twnic.tw/dns-query', 'tls://8.8.4.4:853']
    fallback-filter: { geoip: true, ipcidr: [240.0.0.0/4, 0.0.0.0/32] }
proxy-groups:
  - name: ğŸ”° èŠ‚ç‚¹é€‰æ‹©
    type: select
    proxies:
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - DIRECT
  - name: â™»ï¸ è‡ªåŠ¨é€‰æ‹©
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 600
  - name: ğŸ“² ç”µæŠ¥ä¿¡æ¯
    type: select
    proxies:
      - ğŸ”° èŠ‚ç‚¹é€‰æ‹©
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
    # æ­£åˆ™è¡¨è¾¾ï¼Œåªé€‰æ‹©æ¸¯+å€ç‡x1,x3çš„èŠ‚ç‚¹
    filter: "æ¸¯.*x[1|3]"
  - name: ğŸ‘¨â€ğŸ“ å­¦æœ¯èµ„æº
    type: select
    proxies:
      - DIRECT
      - ğŸ”° èŠ‚ç‚¹é€‰æ‹©
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
  - name: ğŸ’± åŠ å¯†è´§å¸
    type: select
    proxies:
      - ğŸ”° èŠ‚ç‚¹é€‰æ‹©
    # æ­£åˆ™è¡¨è¾¾ï¼Œåªé€‰æ‹©å°æ¹¾æˆ–è€…æ–°åŠ å¡çš„èŠ‚ç‚¹
    filter: "å°æ¹¾|æ–°åŠ å¡"
  - name: ğŸ¤– AIæœåŠ¡
    type: select
    proxies:
      - ğŸ”° èŠ‚ç‚¹é€‰æ‹©
    # æ­£åˆ™è¡¨è¾¾ï¼Œåªé€‰æ‹©ç¾å›½+å®¶å®½èŠ‚ç‚¹
    filter: "ç¾å›½.*å®¶å®½"
  - name: ğŸŸ æ¼ç½‘ä¹‹é±¼
    type: select
    proxies:
      - ğŸ”° èŠ‚ç‚¹é€‰æ‹©
  - name: ğŸ¥ å›½å¤–æµåª’ä½“
    type: select
    proxies:
      - ğŸ”° èŠ‚ç‚¹é€‰æ‹©
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
    # æ­£åˆ™è¡¨è¾¾ï¼Œåªé€‰æ‹©æµåª’ä½“èŠ‚ç‚¹
    filter: "æµåª’ä½“"
  - name: â“‚ï¸ å¾®è½¯æœåŠ¡
    type: select
    proxies:
      - ğŸ”° èŠ‚ç‚¹é€‰æ‹©
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
    filter: "ç¾å›½"
rules:
  # leahd.me
  - IP-CIDR,137.184.39.114/32,DIRECT,no-resolve
  # è‡ªå®šä¹‰
  - DOMAIN-KEYWORD,sci-hub,ğŸ”° èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,category-games@cn,DIRECT
  - GEOSITE,category-ai-chat-!cn,ğŸ¤– AIæœåŠ¡
  - GEOSITE,category-cryptocurrency,ğŸ’± åŠ å¯†è´§å¸
  - GEOSITE,youtube,ğŸ¥ å›½å¤–æµåª’ä½“
  - GEOSITE,netflix,ğŸ¥ å›½å¤–æµåª’ä½“
  - GEOSITE,spotify,ğŸ¥ å›½å¤–æµåª’ä½“
    # google
  - GEOIP,google,ğŸ¤– AIæœåŠ¡,no-resolve
  - GEOSITE,google,ğŸ¤– AIæœåŠ¡
  - GEOSITE,category-scholar-!cn,ğŸ‘¨â€ğŸ“ å­¦æœ¯èµ„æº
  - DOMAIN-SUFFIX,r2.cloudflarestorage.com,â“‚ï¸ å¾®è½¯æœåŠ¡
  - GEOSITE,microsoft,â“‚ï¸ å¾®è½¯æœåŠ¡
  - GEOSITE,icloud,DIRECT
  # steam
  - GEOSITE,steam@cn,DIRECT
  - DOMAIN,steamcdn-a.akamaihd.net,DIRECT
  - DOMAIN-SUFFIX,cm.steampowered.com,DIRECT
  - DOMAIN-SUFFIX,steamserver.net,DIRECT
  # porn
  - GEOSITE,category-porn,ğŸ”° èŠ‚ç‚¹é€‰æ‹©
  # telegram
  - GEOIP,telegram,ğŸ“² ç”µæŠ¥ä¿¡æ¯,no-resolve
  - GEOSITE,telegram,ğŸ“² ç”µæŠ¥ä¿¡æ¯
  # synology
  - IP-CIDR,10.184.146.31/32,DIRECT,no-resolve
  # ç»•è¿‡å›½å†…
  - GEOSITE,cn,DIRECT
  - GEOSITE,apple-cn,DIRECT
  - GEOSITE,geolocation-!cn,ğŸ”° èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,geolocation-cn,DIRECT
  - GEOIP,CN,DIRECT,no-resolve
  - MATCH,ğŸ”° èŠ‚ç‚¹é€‰æ‹©
